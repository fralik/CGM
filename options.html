<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
    <head><title>CGM options</title>
    <script type="text/javascript">
        window.addEventListener("load", init, false);
        
        function init() {
            var showBtn = document.getElementById('showButton');
            
            if ('showButton' in widget.preferences) {
                var show = true;

                if (typeof(widget.preferences.getItem('showButton')) == 'string')
                    show = (widget.preferences.getItem('showButton') == 'true');
                else
                    show = widget.preferences.getItem('showButton');
                
                showBtn.checked = show;
            } else {
                showBtn.checked = true;
            }
            
            showBtn.addEventListener('change', function() {
                //var show = showBtn.checked;
                //console.log('options, checkbox changed to value ' + show + ', type ' + typeof(show));
                widget.preferences.showButton = showBtn.checked;
                
            }, false);
        }
    </script>
    </head>
    <body>
    <form>
        <input type="checkbox" name="showButton" id="showButton" value="show" /><label for="showButton">Show extension's button on the toolbar</label>
    </form>
    </body>
</html>